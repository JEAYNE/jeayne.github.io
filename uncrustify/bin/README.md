# INTRODUCTION
This directory contains Perl scripts used to build the uncrustify documentation.

The information used to build this documentation is based on the output from:
- uncrustify --universalindent
- uncrustify --set &lt;option>=&lt;value>
- uncrustify --tracking {space|nl|start}:HtmlFileName

and on the **UDS files**.

### UDS files
The **U**ncrustify **D**ocumentation **S**cript (UDS) is a very simple text format that 
describes how to execute uncrustify to highlight the effects of an option.

### BUILD PROCESS

1) A default uds file is generated for each option in ./uds/default<br>
   It is possible to override these files by files built manually in ./uds

2) An html file is build for each option.<br>
   This html file contains 3 sections:
   - The **Properties** of the option: Categorie, Type, Default value.
   - A short **Description** of the option.
   - **Examples** of the effects of the option on the code.

   The **Properties** and the **Description** come from the output of ```uncrustify --universalindent```

   The **Examples** is generated by executing uncrustify according to the uds file corresponding to this option.

3) Finally, indexes are built to facilitate access to this information.
   Each index includes an iframe where the option selected in the index is displayed.

The final pages look like this:

   ```
    +-<html>----------------------------------+
    | index .  +-<iframe>------------------+  |
    |       .  | +-<html>----------------+ |  |
    |       .  | | PROPERTIES            | |  |
    |       .  | |   ...                 | |  |
    |       .  | | DESCRIPTION           | |  |
    |       .  | |   ...                 | |  |
    |       .  | | EXAMPLES              | |  |
    |       .  | |   +---------------+   | |  |
    |       .  | |   |               |<---------- [uds file]
    |       .  | |   |               |   | |  |
    |       .  | |   +---------------+   | |  |
    |       .  | |                       | |  |
    |       .  | +-</html>---------------+ |  |
    |       .  +---------------------------+  |
    +-----------------------------------------+
   ```

### The hard work

The scripts in this directory are used to generate all the **html** files 
and the default **uds** files. But most of the time the **uds** file is not 
very good and need to be tuned and replaced **MANUALLY**.

The hardest part is to provide a (short) code example that shows the effect 
of an option in various circumstances.

# Scripts

- For each options **generateDefaultUDS**.pl generates a default uds file.<br>
If a manually edited uds file exists, the file generated by **generateDefaultUDS**.pl
will be ignored at the next step.

- For each option **generateUncrustifyOptions**.pl generates an  html file with the three sections
(Properties, Description, Example) and generates the indexes (by name, by type, by categorie, by keyword).<br>

Each time an uds file is modified (manually or automatically), **generateUncrustifyOptions**.pl should be executed.

# File layout

~~~
 myGitPageHome
   +-> ...
   +-> uncrustify
        +-> index.html       Entry point in the uncrustify documentation
        +-> bin
        |    +-> *.pl        Perl scripts used to generated the various html and udc files
        +-> options
        |     +-> *.html     html files describing options (auto generated)
        +-> uds
             +-> *.uds       udc files edited/tuned manualy (the hard work is here)
             +-> default
                  +-> *.uds  Default uds files (auto generated)

~~~
