@echo off
cls
title Building Comparison Table
set BINDIR="%~dp0"
cd /D %BINDIR%
cd

rem Layout used by this script
rem
rem  home/
rem    +--> bin/
rem    |      +--> *.pl *.bat     ; this scripts and cmp_cfg.pl
rem    +--> _tmp/
rem    |      +--> *.cfg          ; files downloaded
rem    +--> comparison.html       ; file generated by cmp_cfg.pl

SET WGET=D:\APPS\cygwin64\bin\wget.exe
SET BASE=https://raw.githubusercontent.com/uncrustify/uncrustify/master/etc
SET tmp=../_tmp

FOR %%G IN (freebsd,gnu-indent,kr-indent,linux,linux-indent,objc,sun) DO (%WGET% %BASE%/%%G.cfg -O %tmp%/%%G.cfg)

perl cmp_cfg.pl --byname --bycategory --output ..\comparison.html ^
     %tmp%\linux.cfg        ^
     %tmp%\linux-indent.cfg ^
     %tmp%\kr-indent.cfg    ^
     %tmp%\gnu-indent.cfg   ^
     %tmp%\sun.cfg          ^
     %tmp%\freebsd.cfg
