@echo off
cls
title Building Comparison Table
set BINDIR="%~dp0"
cd /D %BINDIR%
cd

rem Layout used by this script
rem
rem  home/
rem    +--> bin/
rem    |      +--> *.pl *.bat     ; this scripts and cmp_cfg.pl
rem    +--> cfg/
rem    |      +--> *.cfg          ; files downloaded
rem    +--> comparison.html       ; file generated by cmp_cfg.pl

SET WGET=D:\APPS\cygwin64\bin\wget.exe
SET BASE=https://raw.githubusercontent.com/uncrustify/uncrustify/master/etc
SET cfg=..\cfg

IF [%1]==[] goto buildtable
IF /I [%1] NEQ [--download] goto buildtable

FOR %%G IN (freebsd,gnu-indent,kr-indent,linux,linux-indent,objc,sun) DO (%WGET% %BASE%/%%G.cfg -O %cfg%/%%G.cfg)

:buildtable
perl cmp_cfg.pl --byname --bycategory --output ..\comparison.html ^
     %cfg%\google2.cfg      ^
     %cfg%\google3.cfg      ^
     %cfg%\ros_ament.cfg    ^
     %cfg%\libxkb.cfg       ^
     %cfg%\linux.cfg        ^
     %cfg%\linux-indent.cfg ^
     %cfg%\kr-indent.cfg    ^
     %cfg%\gnu-indent.cfg   ^
     %cfg%\sun.cfg          ^
     %cfg%\freebsd.cfg
